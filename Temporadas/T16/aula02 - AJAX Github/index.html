<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AJAX Github</title>
</head>
<body>
    <main></main>
    <script>
        let main = document.querySelector('main');

        const loadData = () => { // Meu primeiro AJAX
            const xhr = new XMLHttpRequest() // Criar uma request xml via http
            xhr.open('GET', 'https://api.github.com/users/arthurferreira-dev') // pegando o valor via url/get
            xhr.send(null) // pq quando ele envia para o servidor ele precisa ser nulo
            xhr.onreadystatechange = () => { // quando tiver terminado a request ele irá fazer isso
                if (xhr.readyState === 4) { // se o estado do XMLHttpRequest é identico a 4 (TEM QUE SER 4)
                    const res = JSON.parse(xhr.responseText) // transformando o formato json/string para object(js)
                    let name = res.name
                    let username = res.login
                    let avatarURL = res.avatar_url
                    let followers = res.followers
                    let location = res.location
                    let bio = res.bio

                    //console.log([name, username, avatarURL, followers, location, bio])

                    let avatarIMG = document.createElement('img');
                    avatarIMG.setAttribute('width', '165px')
                    avatarIMG.setAttribute('alt', 'Avatar Github URL')
                    avatarIMG.style.webkitBorderRadius = '50%'
                    avatarIMG.src = avatarURL
                    main.appendChild(avatarIMG)

                    let user = document.createElement('h1');
                    user.style.fontFamily = 'Arial, Verdana, sans-serif'
                    user.innerHTML = name
                    main.appendChild(user)

                    let usname = document.createElement('h3')
                    usname.style.fontWeight = '200'
                    usname.style.fontFamily = 'Arial, Verdana, sans-serif'
                    usname.innerHTML = username
                    main.appendChild(usname)
                                
                    let flwrs = document.createElement('p');
                    flwrs.style.fontWeight = 'bold'
                    flwrs.style.fontFamily = 'Arial, Verdana, sans-serif'
                    flwrs.innerHTML = `${followers} seguidores`
                    main.appendChild(flwrs)

                    let lction = document.createElement('p');
                    lction.style.fontWeight = 'bold'
                    lction.style.fontFamily = 'Arial, Verdana, sans-serif'
                    lction.innerHTML = location
                    main.appendChild(lction)

                    let description = document.createElement('p');
                    description.style.fontWeight = '500'
                    description.style.lineHeight = '24px'
                    description.style.width = '400px'
                    description.style.fontFamily = 'Arial, Verdana, sans-serif'
                    description.innerHTML = bio
                    main.appendChild(description)
                }
            }
        }
                
        setTimeout(loadData(), 5500) // a cada 5 segundos e 5 milisegundos
    </script>
</body>
</html>